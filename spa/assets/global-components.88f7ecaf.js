import{_ as o,o as r,c as d,r as i,n as l,b as u,s as t}from"./index.23a141fd.js";import{B as p}from"./BaseCard.e42d9824.js";const v={props:["mode"]};function f(a,e,n,s,_,c){return r(),d("button",{class:l(n.mode)},[i(a.$slots,"default",{},void 0,!0)],2)}var h=o(v,[["render",f],["__scopeId","data-v-d9a01674"]]);const m={},g={class:"topnav"};function B(a,e){return r(),d("div",g,[i(a.$slots,"default",{},void 0,!0)])}var b=o(m,[["render",B],["__scopeId","data-v-39eba083"]]);const y={props:{activeButton:{type:String,required:!0},id:{type:String,required:!0}},computed:{buttonClass(){return this.activeButton===this.id?"selected":"top-element"}}};function $(a,e,n,s,_,c){return r(),d("div",{class:l(c.buttonClass)},[i(a.$slots,"default",{},void 0,!0)],2)}var E=o(y,[["render",$],["__scopeId","data-v-b7f2d242"]]),C=u(async({app:a})=>{a.component("BaseCard",p),a.component("BaseButton",h),a.component("BaseNavBar",b),a.component("BaseTopNavElement",E),console.log("boot global-components has been initiated."),t.dispatch("loadAuthState"),t.dispatch("setEventsLoadingState",!0),t.dispatch("setDatesLoadingState",!0),console.log("loading events"),t.dispatch("loadCurrentTerm"),fetch(t.getters.getServerURL+"api/v1/public/events").then(e=>{if(e.ok)return e.json();t.dispatch("setLoadingError","There was a server error, and events failed to load."),t.dispatch("setEventsLoadingState",!1)}).then(e=>{const n=[];for(const s in e)n.push({event_id:e[s].event_id,year_group:e[s].year_group,event_title:e[s].event_title,location:e[s].location,staff_no:e[s].staff_no,date:e[s].date,date_id:e[s].date_id,term:e[s].term,year:e[s].year});console.log("events loaded: ",n),t.dispatch("setEventsLoadingState",!1),t.dispatch("setEvents",n),t.dispatch("setEventsAvailable",!0)}).catch(e=>{t.dispatch("setEventsLoadingState",!1),t.dispatch("setLoadingError","There was an error and events failed to load: ",e)}),t.dispatch("loadAllDates"),t.dispatch("loadAllStaff")});export{C as default};
