import{g as x}from"./QBtn.68a98313.js";import{_ as y,o as i,c as d,a7 as a,r as c,B as l,F as S,a8 as k,a9 as w,y as m,aa as g,C as v,v as p,x as u,D as A,z as D,A as E}from"./index.fc2873ca.js";import{B}from"./BaseCard.c5617a1e.js";import{s as V}from"./staffing.1c48af4b.js";const I={props:{title:{type:String,required:!1}}},q=t=>(k("data-v-2ef184c1"),t=t(),w(),t),W=q(()=>a("div",null,null,-1)),K={open:""};function N(t,s,e,h,o,r){return i(),d(S,null,[W,a("dialog",K,[a("header",null,[c(t.$slots,"header",{},()=>[a("h2",null,l(e.title),1)],!0)]),a("section",null,[c(t.$slots,"default",{},void 0,!0)]),a("menu",null,[c(t.$slots,"actions",{},void 0,!0)])])],64)}var P=y(I,[["render",N],["__scopeId","data-v-2ef184c1"]]);const O={props:{modelValue:{},label:{required:!0,type:Number},member:{required:!1},isEditable:{type:Boolean,required:!0}},emits:["update:modelValue","update-array"],methods:{submitData(){this.$emit("update:modelValue",this.$refs.staffname.value),this.$emit("update-array")},warnMessage(){this.isWarning=!0},clickOK(){this.isWarning=!1,document.getElementById(this.member).focus()}},data(){return{isWarning:!1}},components:{WarningPopup:P}},T=t=>(k("data-v-0ba533a8"),t=t(),w(),t),U={for:"staffname"},M=["id"],F={key:1},z=["id","value"],L=T(()=>a("p",null,"Press enter to submit your change when done.",-1));function Q(t,s,e,h,o,r){const f=m("WarningPopup");return i(),d("div",null,[a("label",U,l(e.label),1),e.member?e.member&&!e.isEditable?(i(),d("span",F,l(e.member),1)):e.member&&e.isEditable?(i(),d("input",{key:2,id:e.member,value:e.member,ref:"staffname",onClick:s[2]||(s[2]=(...n)=>r.warnMessage&&r.warnMessage(...n)),onKeyup:s[3]||(s[3]=g((...n)=>r.submitData&&r.submitData(...n),["enter"]))},null,40,z)):v("",!0):(i(),d("input",{key:0,id:e.member,ref:"staffname",onBlur:s[0]||(s[0]=(...n)=>r.submitData&&r.submitData(...n)),onKeyup:s[1]||(s[1]=g(n=>n.target.blur(),["enter"]))},null,40,M)),o.isWarning?(i(),p(f,{key:3,title:"Warning"},{default:u(()=>[a("p",null,"You are about to take a duty away from "+l(e.member)+", who beat you to the slot. This should only be done if you are legitimately swapping with that person, otherwise you are a dick. An email detailing this change will be sent to the deputy head pastoral.",1),L]),actions:u(()=>[a("button",{onClick:s[4]||(s[4]=(...n)=>r.clickOK&&r.clickOK(...n)),style:{width:"20%"}},"OK")]),_:1})):v("",!0)])}var Y=y(O,[["render",Q],["__scopeId","data-v-0ba533a8"]]);const j={mounted(){this.staffArray=this.staff},data(){return{staffArray:[],isEditable:!1}},emits:["update-staff"],components:{StaffInput:Y,BaseCard:B},props:{id:{type:String},yeargroup:{type:String,required:!0},title:{type:String,required:!0},location:{type:String,required:!0},staff:{type:Array,required:!0},date:{type:String,required:!0,default:"1/1/1970"}},methods:{updateStaff(){console.log("DutyCard says: "),console.log(this.staffArray);const t={id:this.id,staff:this.staffArray};console.log("DutyCard calling updateStaff from the store and sending ",t),V.dispatch("updateStaff",t),this.isEditable=!1},editStaff(){this.isEditable=!0}}},G={class:"text-h5 text-weight-bold"},H={class:"text-h4"},J={class:"text-h6"},R={class:"infopanel"},X={class:"button-holder"};function Z(t,s,e,h,o,r){const f=m("staff-input"),n=m("base-card");return i(),p(n,{styleType:e.yeargroup},{default:u(()=>[a("header",null,[a("div",G,l(e.yeargroup),1),a("div",H,l(e.title),1),a("div",J,l(e.location),1)]),a("div",R,[(i(!0),d(S,null,A(o.staffArray,(b,_)=>(i(),p(f,{key:b,member:b,label:_+1,modelValue:o.staffArray[_],"onUpdate:modelValue":C=>o.staffArray[_]=C,isEditable:this.isEditable,onUpdateArray:r.updateStaff},null,8,["member","label","modelValue","onUpdate:modelValue","isEditable","onUpdateArray"]))),128))]),a("div",X,[D(x,{color:"grey-7",onClick:r.editStaff},{default:u(()=>[E("Edit Staff")]),_:1},8,["onClick"])])]),_:1},8,["styleType"])}var se=y(j,[["render",Z],["__scopeId","data-v-19b1fe76"]]);export{se as D};
