import{_ as o,o as n,c as d,r as i,n as u,b as p}from"./index.fc2873ca.js";import{B as f}from"./BaseCard.c5617a1e.js";import{s}from"./staffing.1c48af4b.js";const _={props:["mode"]};function h(r,e,a,t,l,c){return n(),d("button",{class:u(a.mode)},[i(r.$slots,"default",{},void 0,!0)],2)}var v=o(_,[["render",h],["__scopeId","data-v-d9a01674"]]);const m={},b={class:"topnav"};function g(r,e){return n(),d("div",b,[i(r.$slots,"default",{},void 0,!0)])}var B=o(m,[["render",g],["__scopeId","data-v-39eba083"]]);const y={props:{activeButton:{type:String,required:!0},id:{type:String,required:!0}},computed:{buttonClass(){return this.activeButton===this.id?"selected":"top-element"}}};function S(r,e,a,t,l,c){return n(),d("div",{class:u(c.buttonClass)},[i(r.$slots,"default",{},void 0,!0)],2)}var $=o(y,[["render",S],["__scopeId","data-v-b7f2d242"]]),w=p(async({app:r})=>{r.component("base-card",f),r.component("base-button",v),r.component("base-nav-bar",B),r.component("base-top-nav-element",$),console.log("boot global-components has been initiated."),s.dispatch("setEventsLoadingState",!0),s.dispatch("setDatesLoadingState",!0),fetch("https://wheatyfirstdatabase-default-rtdb.europe-west1.firebasedatabase.app/staff.json").then(e=>{if(e.ok)return e.json();s.dispatch("setLoadingError","There was a server error, and events failed to load."),s.dispatch("setEventsLoadingState",!1)}).then(e=>{const a=[];for(const t in e)a.push({id:t,yeargroup:e[t].yeargroup,title:e[t].title,location:e[t].location,staff:e[t].staff,date:e[t].date,term:e[t].term});s.dispatch("setEventsLoadingState",!1),s.dispatch("setEvents",a)}).catch(e=>{s.dispatch("setEventsLoadingState",!1),s.dispatch("setLoadingError","There was an error and events failed to load: ",e)}),fetch("https://wheatyfirstdatabase-default-rtdb.europe-west1.firebasedatabase.app/dates.json").then(e=>{if(e.ok)return e.json();s.dispatch("setDatesLoadingState",!1),s.dispatch("setLoadingError","Dates failed to load due to a server or interner error ")}).then(e=>{const a=[];for(const t in e)a.push({id:e.id,dates:e[t].dates,term:e[t].term});s.dispatch("setDatesLoadingState",!1),s.dispatch("setDates",a)}).catch(e=>{s.dispatch("setDatesLoadingState",!1),s.dispatch("setLoadingError","Dates failed to load due to an error: ",e)}),fetch("https://wheatyfirstdatabase-default-rtdb.europe-west1.firebasedatabase.app/settings.json").then(e=>{if(e.ok)return e.json()}).then(e=>{const a=[];for(const t in e)console.log("setting: ",e[t].currentTerm),a.push({currentTerm:e[t].currentTerm,otherSetting:e[t].otherSetting});console.log("boot is setting the current term to ",a[0].currentTerm),s.commit("setCurrentTerm",a[0])})});export{w as default};
